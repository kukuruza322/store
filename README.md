# Fake store with Stripe API
<h2>https://usm.pythonanywhere.com/</h2>

# Описание
Простой магазин, с интеграцией платежной API <b>Stripe</b>.

Реализованы следующие возможности :
- Функция быстрого заказа в один клик - с прямым переходом на платежную систему.
- Функция добавления в корзину,  а также подтверждение заказа - с возможностью выбора валюты и размера налогов, с последующим перенаправлением на Stripe. 
- Есть возможность просматривать/добавлять/удалять товары через панель администратора.
- История заказов - в процессе разработки.

<b>ВАЖНО!</b> При оформлении заказа через корзину необходимо убедиться что все товары в корзине в одной валюте и она соответствует выбранной для оплаты!
На данный момент функция автоматического пересчета валюты на стороне API Stripe находится в стадии Бета-тестирования, поэтому текущий функционал
оставлен с учетом дальнейших улучшений сервиса.

<b>API:</b>
возвращает Stripe-object session.id при GET запросе на страницу вида : https://usm.pythonanywhere.com/item/13/api-buy. 

Код товара (item) должен существовать в базе, его так же можно узнать на странице детальной информации о товаре (артикул SKU).


Переход по ссылке через захват объектов session.id на JS реализовать не удалось - функционал реализован посредством прямого редиректа средствами Джанго.


# Запуск
Для сборки и запуска вам понадобится .env файл, который я могу отправить при необходимости =)

Также в репозитории предусмотрен Докер файл для запуска образа через `docker build -t store .` и последующим 

`docker run -p 8000:8000 -it store`

Ручной запуск:

1. Создать виртуальной окружение Python версии 3.8.6 и установить зависимости:

`python -m venv venv`

`activate`/`source activate`

`pip install -r requirements.txt`

2. Выполнить миграции 

`python manage.py makemigrations`

`python manage.py migrate`

3. Запустить сервер

`python manage.py runserver`

4. Создать учетную запись администратора
`python manage.py createsuperuser`

5. Создать товары через панель администратора и выполнить первый заказ.

6. Enjoy!
